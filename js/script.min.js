const $addRocketBtn=$("#addRocketBtn"),$removeRocketBtn=$("#removeRocketBtn"),$resetAllBtn=$("#resetAllBtn"),$rocketNumLbl=$("#rocketNumLbl"),$teamLbl=$("#teamLbl"),$scoreLbl=$("#scoreLbl"),$rocketsDiv=$("#rocketsDiv"),$buttonsDiv=$("#buttonsDiv"),$initialRocket=$("#initialRocket"),$initialFire=$("#initialFire"),$plusOneBtn=$("#plusOneBtn"),$minusOneBtn=$("#minusOneBtn"),$resetBtn=$("#resetBtn"),$rocket=$(".rocket"),rocketWidth=parseInt($rocket.css("width")),rocketHeight=parseInt($rocket.css("height")),firePositionOffset=25,btnPositionOffset=10,btnYStartPosition=33,maxRocketPoints=18,rocketHeightDifference=1/maxRocketPoints,windowHeightDifference=1/35;let rocketPoints={},rocketYStartPosition=-1,numRockets=4,clickingRocket=!1,dragStartPosition=-1,$rocketToDrag=void 0;const storageRocketPoints=localStorage.rocketPoints;""!==storageRocketPoints&&void 0!==storageRocketPoints&&(rocketPoints=JSON.parse(storageRocketPoints));const storageNumRockets=localStorage.numRockets;function rebuildScreen(){const rocketSeparation=10*$(window).width()/12/(numRockets-1),plusOneBtnHeight=parseInt($(".btn-plus-one").css("height")),minusOneBtnWidth=parseInt($(".btn-minus-one").css("width")),resetBtnWidth=parseInt($(".btn-reset").css("width")),$lblTeam=$(".lbl-team"),teamLblWidth=parseInt($lblTeam.css("width")),teamLblHeight=parseInt($lblTeam.css("height")),newBtnY=$(window).height()*btnYStartPosition*windowHeightDifference;$rocketsDiv.empty(),$buttonsDiv.empty();for(let i=0;i<numRockets;i++){const $newRocket=$initialRocket.clone(),$newFire=$initialFire.clone(),$newPlusOneBtn=$plusOneBtn.clone(),$newMinusOneBtn=$minusOneBtn.clone(),$newResetBtn=$resetBtn.clone(),$newTeamLbl=$teamLbl.clone(),$newScoreLbl=$scoreLbl.clone();$newRocket.attr("id","rocket"+i.toString()),$newRocket.attr("data-rocket-number",i.toString()),$newRocket.attr("data-fire-id","#fire"+i.toString()),$newRocket.attr("data-score-id","#scoreLbl"+i.toString()),$newRocket.css("left",($(window).width()*(1/12)+rocketSeparation*i-rocketWidth*i/(numRockets-1)).toString()+"px"),rocketYStartPosition=newBtnY-2*plusOneBtnHeight-rocketHeight,$newFire.attr("id","fire"+i.toString()),$newFire.css("left",(parseInt($newRocket.css("left"))+rocketWidth/4).toString()+"px"),$newPlusOneBtn.attr("id","plusOneBtn"+i.toString()),$newPlusOneBtn.attr("data-rocket-id","#rocket"+i.toString()),$newPlusOneBtn.attr("data-score-id","#scoreLbl"+i.toString()),$newPlusOneBtn.attr("data-fire-id","#fire"+i.toString()),$newPlusOneBtn.attr("data-rocket-number",i.toString());const newBtnX=parseInt($newRocket.css("left"))+rocketWidth/2,newPlusBtnY=newBtnY-plusOneBtnHeight-btnPositionOffset;$newPlusOneBtn.css({left:newBtnX.toString()+"px",top:newPlusBtnY.toString()+"px"}),$newMinusOneBtn.attr("id","minusOneBtn"+i.toString()),$newMinusOneBtn.attr("data-rocket-id","#rocket"+i.toString()),$newMinusOneBtn.attr("data-score-id","#scoreLbl"+i.toString()),$newMinusOneBtn.attr("data-fire-id","#fire"+i.toString()),$newMinusOneBtn.attr("data-rocket-number",i.toString());const newMinusBtnX=newBtnX-minusOneBtnWidth-btnPositionOffset;$newMinusOneBtn.css({left:newMinusBtnX.toString()+"px",top:newPlusBtnY.toString()+"px"}),$newResetBtn.attr("id","resetBtn"+i.toString()),$newResetBtn.attr("data-rocket-id","#rocket"+i.toString()),$newResetBtn.attr("data-score-id","#scoreLbl"+i.toString()),$newResetBtn.attr("data-fire-id","#fire"+i.toString()),$newResetBtn.attr("data-rocket-number",i.toString());const newResetBtnX=newMinusBtnX+minusOneBtnWidth+btnPositionOffset/2-resetBtnWidth/2;$newResetBtn.css({left:newResetBtnX.toString()+"px",top:newBtnY.toString()+"px"}),$newTeamLbl.attr("id","teamLbl"+i.toString()),$newTeamLbl.text("Team: "+(i+1).toString());const newTeamLblX=newMinusBtnX-teamLblWidth+minusOneBtnWidth,newTeamLblY=newPlusBtnY-teamLblHeight-btnPositionOffset;$newTeamLbl.css({left:newTeamLblX.toString()+"px",top:newTeamLblY.toString()+"px"}),$newScoreLbl.attr("id","scoreLbl"+i.toString()),$newScoreLbl.css({left:newBtnX.toString()+"px",top:newTeamLblY.toString()+"px"}),$rocketsDiv.append($newFire),$rocketsDiv.append($newRocket),$buttonsDiv.append($newPlusOneBtn),$buttonsDiv.append($newMinusOneBtn),$buttonsDiv.append($newResetBtn),$buttonsDiv.append($newTeamLbl),$buttonsDiv.append($newScoreLbl),moveRocket($newRocket,!1)}const newRemoveBtnY=newBtnY-parseInt($removeRocketBtn.css("height"))-btnPositionOffset,newAddBtnY=newRemoveBtnY-parseInt($addRocketBtn.css("height"))-btnPositionOffset;$addRocketBtn.css("top",newAddBtnY.toString()+"px"),$removeRocketBtn.css("top",newRemoveBtnY.toString()+"px"),$resetAllBtn.css("top",newBtnY.toString()+"px"),$rocketNumLbl.css("top",(newAddBtnY-parseInt($rocketNumLbl.css("height"))-btnPositionOffset).toString()+"px"),$(".btn-points").on("click",function(i){i.preventDefault();var $currentRocket=$($(this).data("rocket-id")),i=parseInt($(this).data("rocket-number"));$(this).hasClass("btn-plus-one")&&rocketPoints[i]<maxRocketPoints?rocketPoints[i]++:$(this).hasClass("btn-minus-one")&&0<rocketPoints[i]?rocketPoints[i]--:$(this).hasClass("btn-reset")&&(rocketPoints[i]=0),moveRocket($currentRocket,!0)})}function moveRocket($currentRocket,isAnimate){const $currentFire=$($currentRocket.data("fire-id")),rocketNumber=parseInt($currentRocket.data("rocket-number"));void 0===rocketPoints[rocketNumber]&&(rocketPoints[rocketNumber]=0),localStorage.rocketPoints=JSON.stringify(rocketPoints),$($currentRocket.data("score-id")).text("Score: "+rocketPoints[rocketNumber].toString()),isAnimate?$currentRocket.animate({top:(rocketYStartPosition-rocketYStartPosition*rocketPoints[rocketNumber]*rocketHeightDifference).toString()+"px"},{duration:100,easing:"linear",step:function(now){$currentFire.css("top",now+rocketHeight-firePositionOffset)}}):($currentRocket.css("top",(rocketYStartPosition-rocketYStartPosition*rocketPoints[rocketNumber]*rocketHeightDifference).toString()+"px"),$currentFire.css("top",(parseInt($currentRocket.css("top"))+rocketHeight-firePositionOffset).toString()+"px")),0===rocketPoints[rocketNumber]?$currentFire.hide().css("height","0"):$currentFire.show().animate({height:"80px"},{duration:200,easing:"linear"})}""!==storageNumRockets&&void 0!==storageNumRockets&&(numRockets=JSON.parse(storageNumRockets),$rocketNumLbl.text("Rockets: "+numRockets.toString())),localStorage.numRockets=JSON.stringify(numRockets),$(window).on("load resize",function(){rebuildScreen()}),$rocket.attr("draggable","false"),$(".fire").attr("draggable","false"),$rocketsDiv.on("mousedown",".rocket",function(e){e.preventDefault(),clickingRocket=!0,$rocketToDrag=$(e.target),dragStartPosition=e.pageY}),$(document).on("mouseup",function(){clickingRocket=!1}).on("mousemove",function(e){if(!1!==clickingRocket){let rocketNumber=parseInt($rocketToDrag.data("rocket-number")),rocketMoved=!1;dragStartPosition-e.pageY>=Math.round(rocketYStartPosition*rocketHeightDifference)?(rocketPoints[rocketNumber]+=Math.round((dragStartPosition-e.pageY)/Math.round(rocketYStartPosition*rocketHeightDifference)),rocketPoints[rocketNumber]>maxRocketPoints&&(rocketPoints[rocketNumber]=maxRocketPoints),dragStartPosition=e.pageY,rocketMoved=!0):e.pageY-dragStartPosition>=Math.round(rocketYStartPosition*rocketHeightDifference)&&(rocketPoints[rocketNumber]-=Math.round((e.pageY-dragStartPosition)/Math.round(rocketYStartPosition*rocketHeightDifference)),rocketPoints[rocketNumber]<0&&(rocketPoints[rocketNumber]=0),dragStartPosition=e.pageY,rocketMoved=!0),rocketMoved&&moveRocket($rocketToDrag,!1)}}),$(".btn-rockets").on("click",function(e){e.preventDefault(),$(this).hasClass("btn-plus-one")?numRockets++:$(this).hasClass("btn-minus-one")&&2<numRockets&&numRockets--,localStorage.numRockets=JSON.stringify(numRockets),$rocketNumLbl.text("Rockets: "+numRockets.toString()),rebuildScreen()}),$resetAllBtn.on("click",function(e){e.preventDefault(),rocketPoints={};for(let i=0;i<numRockets;i++)moveRocket($("#rocket"+i.toString()),!0)});